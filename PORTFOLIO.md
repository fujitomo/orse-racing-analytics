# データサイエンティスト ポートフォリオ

## プロフィール
**藤野智宏** 社内SEを6年ほど経験後にSES企業で11年ほど派遣エンジニアとしてシステム開発の経験があります。  
webシステム開発やwindows用アプリケーションの開発業務が主です。  
詳細設計書・実装・テスト・運用保守の業務が主体です。  
データ分析は実務未経験ですが、統計検定2級やpython資格取得等で独学しました。  
その後に本ポートフォリオとして引用する実績作品（分析レポート）を作成しました。  

### 本ポートフォリオの特徴
- **統計的検証**: 全仮説でp<0.001の有意性を確認、効果サイズ（Cohen's d）による評価
- **再現性**: コード公開、実行手順明記により第三者検証が可能です
- **時系列分割**: 2010-2020年訓練、2021-2024年検証による厳密な評価

## 主要成果：REQI（競走経験質指数）の開発

### プロジェクト概要
**課題**: レースの「質」を定量化し、予測精度の向上を実現すること

**解決策**: グレード・場所・距離を統合した合成特徴量REQIを開発しました

### 成果
- **特徴量開発**: REQIを設計・実装しました（グレード・場所・距離の重み付き統合）
- **統計的検証**: 全仮説（H1-H3, H-I1-H-I4）でp<0.001の有意性を確認しました
- **性能**: 統合モデルR²=0.6786を達成しました（オッズ単独よりΔR²=+0.0360の改善）
- **予測精度**: 最高REQI単独でR²=0.536を達成しました（オッズの約80%の性能）

### 数値的成果
| 指標 | 結果 | 統計的有意性 |
|------|------|-------------|
| **平均REQIと複勝率の相関** | r=0.615, R²=0.378 | p<0.001 |
| **最高REQIと複勝率の相関** | r=0.732, R²=0.536 | p<0.001 |
| **統合モデル改善** | ΔR²=+0.0360 | F=399.48, p<1e-6 |
| **データ規模** | 346,413レコード | 17,841頭（2010-2024年） |
| **効果サイズ** | Cohen's d=0.955（REQI） | 大効果（d≥0.8） |

## 実装した技術

### 分析手法の選択理由
- **相関分析（Pearson, Spearman）**: 線形関係と順位関係の両方を評価するためです。重み決定や性能評価に適用しました。
- **線形回帰、F検定**: 予測精度（R²）と統計的有意性を同時に評価するためです。統合モデルの性能比較に適用しました。
- **効果サイズ（Cohen's d）**: p値だけでなく実用的意義を評価するためです。統計的有意性と合わせて効果の大きさを評価しました。
- **時系列分割**: 未来情報の混入を防止し、汎化性能を適切に評価するためです。訓練2010-2020年、検証2021-2024年で実施しました。

### 実装上の工夫点
- **重み決定の統計的根拠**: 各要素の相関係数の2乗（寄与度）を正規化して重みを算出しました（グレード57.3%, 場所37.5%, 距離5.2%）。
- **データリーケージ防止**: 各レースのREQI計算時に、そのレース以降の結果は一切使用しない時系列設計を採用しました。
- **循環論理の回避**: 重み算出には勝率（1着のみ）を使用し、目的変数（複勝率：3着以内）とは独立して扱いました。

### 品質管理
- **VIF検証**: 多重共線性の問題がないことを確認しました（最大VIF: 3.365 < 5.0）。
- **統計的有意性確認**: p値、信頼区間（Bootstrap法、1000回サンプリング）による徹底的な検証を実施しました。
- **コード再現性確保**: シード固定、実行手順明記により第三者検証が可能です。

## 成果物

### 提供資料
- **分析レポート**: `REQI_analysis_report.md`
- **実行コード**: `analyze_REQI.py`, `process_race_data.py`
- **可視化結果**: `results/odds/odds_comparison/`

### 再現手順
```bash
# データ前処理
python process_race_data.py --turf-only --start 2010-01-01 --end 2024-12-31 --export export/dataset

# 分析実行
python analyze_REQI.py --odds-analysis export/dataset --output-dir results/odds --min-races 6
```

### 環境
- Python 3.11.8
- 使用ライブラリ・バージョンは `requirements.txt` に記載しています。

## データサイエンティストとしての強み

### 1. 統計的検証力
- **実績**: 7つの仮説（H1-H3, H-I1-H-I4）すべてでp<0.001の有意性を確認しました。
- **効果サイズ評価**: Cohen's d=0.955で大効果を確認しました（単なる有意性だけでなく実用的意義も評価）。
- **時系列分割**: 2010-2020年訓練、2021-2024年検証による厳密な検証設計を実施しました。

### 2. 特徴量エンジニアリング力
- **ドメイン知識の活用**: 競馬の専門知識を基にした合成特徴量（REQI）を開発しました。
- **統計的根拠に基づく設計**: 重み決定を相関分析から算出しました（グレード57.3%, 場所37.5%, 距離5.2%）。
- **データリーケージ防止**: 時系列設計により未来情報の混入を防止しました。

### 3. 再現性・品質管理
- **コード公開**: GitHubでコード公開、実行手順明記により第三者検証が可能です。
- **品質管理**: VIF検証による多重共線性チェック、統計的有意性の徹底確認を実施しました。
- **透明性**: 計算過程を明確にし、再現性を確保しました。


## アピールポイント

### 統計的検証
- 全仮説でp<0.001の有意性を確認しました。
- 効果サイズ（Cohen's d=0.955）で大効果を確認しました。
- 7つの仮説（H1-H3, H-I1-H-I4）すべて支持されました。

### 技術的実装
- 合成特徴量の設計と重み決定を実施しました（グレード57.3%, 場所37.5%, 距離5.2%）。
- 時系列分割による厳密な検証を実施しました（訓練2010-2020年、検証2021-2024年）。
- VIF検証による多重共線性チェックを実施しました。

### 再現性・品質
- コード公開、実行手順明記により再現性を確保しました。
- 第三者検証が可能な設計です。
- データリーケージ防止の時系列設計を採用しました。

## 分析の制約事項

本分析は統計的検証の実践経験を示すことを目的としており、以下の制約があります：

**1. 実用的投資戦略としての収益性**
- 投資シミュレーションの結果、すべての戦略が回収率100%未満でした。
- 本分析の目的は「補助特徴量の統計的検証」であり、商用サービスの提案ではありません。

**2. 適用範囲**
- 芝レース限定です（ダート・障害レースは未検証）。
- 日本中央競馬のみです（海外競馬は対象外）。

**3. モデルの範囲**
- 騎手・調教師・馬体重等の要因は今回の分析範囲外です（今後の拡張課題）。

---

## 本ポートフォリオについて

本ポートフォリオは、データサイエンス実務に就くことを目標にして作成した実績作品です。

**添付資料**: `REQI_analysis_report.md`（詳細な分析レポート）

**分析の目的**: 
本分析は「投資戦略の構築」ではなく、「補助特徴量（REQI）の統計的有意性検証」を目的としています。
統計的検証により、オッズ情報と組み合わせることで予測精度の向上（ΔR²=+0.0360, p<1e-6）を確認しました。

**再現性**: すべての分析はJRDBのデータがあれば再現可能です。
